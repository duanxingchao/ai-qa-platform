# ⚡ 快速部署命令清单

## 📋 **部署前信息准备**

```bash
# 您需要准备的信息：
服务器IP: ___________________
SSH用户名: _________________
代理地址: http://proxy-server:port
代理用户名: _________________ (如果需要)
代理密码: ___________________ (如果需要)
数据库主机: _________________
数据库密码: _________________
```

## 🚀 **一键部署命令序列**

### **步骤1: 连接服务器**
```bash
ssh 您的用户名@您的服务器IP
```

### **步骤2: 设置代理环境**
```bash
export http_proxy=http://您的代理地址:端口
export https_proxy=http://您的代理地址:端口
git config --global http.proxy http://您的代理地址:端口
git config --global https.proxy http://您的代理地址:端口
```

### **步骤3: 下载项目**
```bash
git clone https://github.com/duanxingchao/ai-qa-platform.git
cd ai-qa-platform
```

### **步骤4: 一键部署**
```bash
chmod +x quick-deploy-with-proxy.sh
./quick-deploy-with-proxy.sh
```

### **步骤5: 验证部署**
```bash
# 检查容器状态
docker-compose -f docker-compose.ubuntu18.yml ps

# 测试API
curl http://localhost:18088/api/health
curl http://localhost:18080/health

# 获取访问地址
echo "前端: http://$(hostname -I | awk '{print $1}'):18080"
echo "后端: http://$(hostname -I | awk '{print $1}'):18088"
```

## ✅ **成功标志**

看到以下输出说明部署成功：
```bash
✅ 代理环境配置完成
✅ 系统兼容性检查通过
✅ Docker安装完成
✅ 项目环境配置完成
✅ 数据库连接测试成功
✅ Docker服务构建和启动成功
✅ 数据库表创建完成
✅ 部署验证完成！

=== 访问信息 ===
前端页面: http://您的服务器IP:18080
后端API: http://您的服务器IP:18088
默认账号: admin
默认密码: admin123

🎉 智能问答系统已在代理环境下成功部署！
```

## 🚨 **快速故障排除**

### **代理问题**
```bash
# 测试代理
curl -I --proxy "$http_proxy" https://www.google.com

# 重新设置代理
export http_proxy=http://正确地址:端口
export https_proxy=http://正确地址:端口
```

### **Docker问题**
```bash
# 重启Docker
sudo systemctl restart docker

# 重新构建
docker-compose -f docker-compose.ubuntu18.yml down
docker-compose -f docker-compose.ubuntu18.yml up -d --build
```

### **数据库问题**
```bash
# 测试连接
telnet 数据库主机 8000

# 检查权限
docker run --rm postgres:13 psql "postgresql://dmp_rnd_xa:密码@主机:8000/datalake" -c "SELECT 1;"
```

### **端口问题**
```bash
# 检查占用
netstat -tuln | grep :18080

# 停止占用进程
sudo lsof -i :18080
sudo kill -9 进程ID
```

## 📞 **技术支持**

如果遇到问题，请收集以下信息：
```bash
# 系统信息
uname -a
cat /etc/os-release

# 容器状态
docker-compose -f docker-compose.ubuntu18.yml ps

# 错误日志
docker-compose -f docker-compose.ubuntu18.yml logs > error.log
```

## 🎯 **部署时间预估**

- ⏱️ **总时间**: 约30分钟
- 🔧 **环境准备**: 5分钟
- 📥 **代码下载**: 3分钟
- 🐳 **Docker安装**: 15分钟
- ✅ **验证测试**: 7分钟

## 📱 **访问信息**

部署成功后：
- 🌐 前端: `http://服务器IP:18080`
- 🔌 后端: `http://服务器IP:18088`
- 👤 登录: admin / admin123
